{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["SearchFilter","handleFilter","useState","searchValue","setSearchValue","value","onChange","e","target","PersonForm","handleSubmit","handleAlert","newName","setNewName","newNumber","setNewNumber","onSubmit","event","preventDefault","console","log","type","Person","person","handleRemove","name","number","onClick","window","confirm","id","Persons","persons","map","key","Notification","message","className","style","position","top","baseUrl","axios","get","then","response","data","newPerson","post","delete","put","App","setPersons","alertMessage","setAlertMessage","useEffect","personService","initialPersons","catch","error","warn","list","notify","setTimeout","Filter","pos","findIndex","toUpperCase","concat","returnPerson","filter","search","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4b4cfc6e.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\n\r\nconst SearchFilter = ({ handleFilter }) => {\r\n  const [ searchValue, setSearchValue ] = useState('')\r\n\r\n  const doChange = (e) => {\r\n    setSearchValue(e.target.value)\r\n    handleFilter(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input value={searchValue} onChange={doChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchFilter","import React, { useState } from 'react'\r\n\r\nconst PersonForm = ({ handleSubmit, handleAlert }) => {\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n\r\n  const doSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (newName === '' || newNumber === '') {\r\n      handleAlert('error', 'You need to input the data (name & number) first')\r\n      return\r\n    }\r\n\r\n    if (handleSubmit(newName, newNumber) === 'success') {\r\n      setNewNumber('')\r\n      setNewName('')\r\n    } else {\r\n      console.log('Something is wrong and it is taken care in the handleSubmit function')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={doSubmit}>\r\n      <div>\r\n        name: <input value={newName} onChange={(e) => setNewName(e.target.value)} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={(e) => setNewNumber(e.target.value)} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({ person, handleRemove }) => {\r\n  const doRemove = () => {\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      handleRemove(person.id)\r\n    }\r\n  }\r\n\r\n  return <div>\r\n    {person.name} {person.number}\r\n    <button onClick={doRemove}>delete</button>\r\n  </div>\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ persons, handleRemove }) => {\r\n  return (\r\n    persons.map(person => \r\n      <Person \r\n        key={person.name} \r\n        person={person} \r\n        handleRemove={handleRemove}\r\n      />)\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ type, message }) => {\r\n  return (\r\n    <div className={type} style={{position: 'fixed', top: 0}}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\n// const baseUrl = 'http://localhost:5000/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n  const req = axios.get(baseUrl)\r\n  return req.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n  const req = axios.post(baseUrl, newPerson)\r\n  return req.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const req = axios.delete(`${baseUrl}/${id}`)\r\n  return req.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const req = axios.put(`${baseUrl}/${id}`, newPerson)\r\n  return req.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ searchValue, setSearchValue ] = useState('')\n  const [ alertMessage, setAlertMessage ] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n      .catch(error => {\n        console.warn(error)\n      })\n  }, [])\n\n  const isExist = name => persons.findIndex(person => person.name.toUpperCase() === name.toUpperCase())\n\n  const notify = (type, message) => {\n    setAlertMessage({\n      type: type,\n      message: message\n    })\n    setTimeout(() => {\n      setAlertMessage(null)\n    }, 3000)\n  }\n\n  const handleSubmit = (newName, newNumber) => {\n    const pos = isExist(newName)\n    if (pos >= 0) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number (${persons[pos].number}) with a new one (${newNumber})?`)) {\n        const newPerson = { name: persons[pos].name, number: newNumber }\n        personService\n          .update(persons[pos].id, newPerson)\n          .then (returnPerson => {\n            setPersons(persons.map(person => \n              person.id !== persons[pos].id \n              ? person \n              : returnPerson))\n          })\n          .catch(error => {\n            (error.message === 'Request failed with status code 404')\n              ? notify('error', `Information of ${newName} has been already removed from server`)\n              : notify('error', 'Error updating new phone number')\n            \n            setPersons(persons.filter(person => person.name.toUpperCase() !== newName.toUpperCase()))\n            return 'fail'\n          })\n        \n        notify('success', `${newName}'s new phone number was updated`)\n        return 'success'\n      }\n      notify('warning', 'Nothing happens yet')\n    } else {\n      personService\n        .create({ name: newName, number: newNumber })\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n        })\n        .catch(error => {\n          console.warn(error)\n          notify('error', 'Error adding new person to the phonebook')\n          return 'fail'\n        })\n      \n      notify('success', `${newName} was added successfully to the phonebook`)\n      return 'success'\n    }\n  }\n\n  const handleRemove = (id) => {\n    personService\n      .remove(id)\n      .then(setPersons(persons.filter(person => person.id !== id)))\n      .then(notify('success', 'Remove successfully'))\n      .catch(error => {\n        console.warn(error)\n        notify('error', 'Error when trying to remove the person')\n      })\n  }\n\n  const findPersons = (list, value) => {\n    return list.filter(person => \n      person.name.toUpperCase()\n      .search(value.toUpperCase()) >= 0\n    )\n  }\n\n  const handleFilter = (value) => {\n    setSearchValue(value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      { alertMessage && <Notification type={alertMessage.type} message={alertMessage.message}/>}\n\n      <Filter handleFilter={handleFilter}/>\n\n      <h2>add a new</h2>\n      <PersonForm handleSubmit={handleSubmit} handleAlert={notify}/>\n\n      <h2>Numbers</h2>\n      <Persons \n        persons={searchValue === '' \n          ? persons \n          : findPersons(persons, searchValue)}\n        handleRemove={handleRemove}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}